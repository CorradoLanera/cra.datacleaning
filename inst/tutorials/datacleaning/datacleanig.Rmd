---
title: "Data Cleaning per la Ricerca Clinica"
subtitle: "Verifiche formative rapide"
description: "Tutorial per sperimentarsi sull'utilizzo degli strumenti descritti durante il corso _**Data cleaning per la ricerca clinica**_ per una corretta e completa importazione di basi di dati in R da fonti esterne (principalmente file `.csv` o fogli Excel)."
author: "Corrado Lanera"
output:
  learnr::tutorial:
    progressive: true
    allow_skip: true
runtime: shiny_prerendered
---

```{r setup, include=FALSE}
library(learnr)
library(gradethis)
library(tidyverse)

knitr::opts_chunk$set(echo = FALSE)
gradethis::gradethis_setup(
    pass.praise = TRUE,
    fail.encourage = TRUE,
    fail.hint = TRUE
)
```



## Importazione

Rispondi alle seguenti domande.

### Dati mancanti

```{r missing}
quiz(caption = "Come segnalare alle funzioni di import come sono codificati nel file sorgente i dati mancanti.",
  question('
Se tra le celle di un file Excel troviamo sia campi vuoti che alcuni riempiti con il simbolo `-`, cosa (se) dobbiamo passare all\'argomento
riportato qui sotto con `___` per fare in modo che entrambi vengano correttamente importati come `NA`?

 ```r
library(tidyverse)
library(readxl)

db <- read_excel("<path/to/file.xlsx>", na = ___)
 ```


',
           
    answer('`c("", "-")`',
           correct = TRUE,
           message = random_praise()),
    
    answer('`c("-")`',
           message = "Attribuendo un valore di al paramentro `na = ` sostituiamo, e non _aggiungiamo_, quanto definizmo noi al/ai valori già presenti di default per tale argomento."),
    
    answer('Nulla, va bene il/i valore/i di default',
           message = 'Il valore di default è il campo vuoto, che lo rappresentiamo con una stringa vuota: `""`'),
    
    answer('`NA`',
           message = "`NA` è il valore che vogliamo inserire per codificare i dati mancanti, non quello che 'leggiamo' nei dati sorgente"),
    
    try_again = random_encouragement(),
    allow_retry = TRUE,
    random_answer_order = TRUE
  )
)
```


### Righe e colonne mancanti

< da aggiungere in futuro >




### Uniformità nomi colonne

< da aggiungere in futuro >



## Espressioni regolari

Rispondi alle seguenti domande.


### Carattere Jolly

```{r jolly}
quiz(caption = "Il punto `.` nelle espressioni regolari rappresenta un generico carattere, ma come lo sfruttiamo e come si differenzia tra l\'espressione e il testo?",
  question('Che stringa restituisce la chiamata seguente?

  ```r
  library(stringr)
  
  str_replace("pun.to", ".", "o")
  ```
',
           
    answer('"oun.to"',
           correct = TRUE,
           message = random_praise()),
    
    answer('"punoto"',
           message = "Il punto nell'espressione regolare è un giolli che rappresenta un carattere qualsiasi e non un 'vero' punto, se vuoi cercare un 'vero' punto, devi anteporre, nell'espressione regolare un backslash (in R quindi due), per esempio: `str_replace(\"pun.to\", \"\\\\.\", \"o\")`"),
    
    answer('"oooooo"',
           message = '`str_replace` trova solo la prima occorrenza che soddisfa il pattern descritto dall\'espressione regolare, e non tutte.'),
    
    answer('"pun.t."',
           message = "Il secondo argomento di `str_replace` è il pattern e il terzo la stringa da usare per sostiuire la porzione corrispondente a quella descritta dall'espressione regolare; non viceversa."),
    
    try_again = random_encouragement(),
    allow_retry = TRUE,
    random_answer_order = TRUE
  )
)
```

### Scorciatoie

```{r scorciatoie}
quiz(caption = "Nel pacchetto `{stringr}` sono presenti numerose funzioni utili come scorciatoie per non scrivere ogni volta (rischiando quindi anche di sbagliare) espressioni regolari complesse ma per assolvere compiti comuni. Vediamone qualcuna.",
  question('Come possiamo eliminare gli spazi in eccesso nella stringa:

  ```r
  s <- "  Espressioni  Regolari  "
  
  ```
',
           
    answer('`str_squish(s)`',
           correct = TRUE,
           message = random_praise()),
    
    answer('`str_trim(s)`',
           message = "`str_trim` elimina solo gli spazi all'inizio e alla fine, non anche quelli in eccesso ridondanti in mezzo al testo"),
    
    answer('`str_replace(s, " ", "")`',
           message = 'In questo modo eliminiamo solo (e sempre) il primo spazio (se presente), potrebbe non essere uno spazio ridondante né superfluo.'),
    
    answer('`str_replace_all(s, " ", "")`',
           message = "In questo modo eliminiamo tutti gli spazi presenti nella stringa, indipendentemente dal fatto che siano o meno ridondanti."),
    
    try_again = random_encouragement(),
    allow_retry = TRUE,
    random_answer_order = TRUE
  )
)
```

## `{unheadr}`

Rispondi alle seguenti domande.




## Tidy data

Rispondi alle seguenti domande.




## Numeri

Rispondi alle seguenti domande.


### A

```{r numbers}
quiz(caption = "XXX-quiz",
  question("q",
           
    answer("a",
           correct = TRUE,
           message = random_praise()),
    
    answer("b",
           message = ""),
    
    answer("c",
           message = ""),
    
    answer("d",
           message = ""),
    
    try_again = random_encouragement(),
    allow_retry = TRUE,
    random_answer_order = TRUE
  )
)
```




### Ce l'hai fatta!!!

###

Hai risposto a tutto e quindi ora padroneggi:

- a

- b

- c
  

Congratulazioni!!
  

Grazie mille per aver partecipato a questo corso!

___\@CorradoLanera___






```{r quiz-template, eval=FALSE, include=FALSE}
quiz(caption = "XXX-quiz",
  question("q",
           
    answer("a",
           correct = TRUE,
           message = random_praise()),
    
    answer("b",
           message = ""),
    
    answer("c",
           message = ""),
    
    answer("d",
           message = ""),
    
    try_again = random_encouragement(),
    allow_retry = TRUE,
    random_answer_order = TRUE
  )
)
```


<!-- * Submit `1+1` to receive a correct grade. -->
<!-- ```{r ex-template-code, include = FALSE, exercise = TRUE, eval=FALSE, exercise.lines = 3} -->

<!-- ``` -->


```{r ex-template-code-hint-1, eval=FALSE, include = FALSE}
# start typing
1
```

```{r ex-template-code-hint-2, eval=FALSE, include = FALSE}
# next
1 + 
```

```{r ex-template-code-solution, eval=FALSE, include = FALSE}
1 + 1
```


```{r ex-template-check, eval=FALSE, include=FALSE}
grade_result(pass_if(~{
  ref <- 2
  identical(.result, ref)
  
}), incorrect = "Wrong answer.")
```







<!-- ```{r blank, exercise = TRUE, exercise.blanks = "___+", eval = FALSE, include = FALSE} -->
<!-- 1 + ____ -->
<!-- ``` -->



```{r blank-solution, eval = FALSE, include = FALSE}
1 + 3
```

```{r blank-code-check, eval = FALSE, include = FALSE}
grade_code()
```

